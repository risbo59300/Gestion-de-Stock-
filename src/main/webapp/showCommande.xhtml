<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
       xmlns:p="http://primefaces.org/ui">

	<h:head></h:head>
	
	<body> 
	<p:layout fullPage="true">
	
		<p:layoutUnit position="north" size="200">

			<marquee> <h:outputText style="color:blue" value="Bienvenue dans notre magasin" /></marquee>
			
			<ui:include src="#{userMBean.menu}" />
		</p:layoutUnit>
		
		<p:layoutUnit position="south" size="100">
			<h:outputText value="Copyright 2021." />+
			<ui:include src="/menuHSud.xhtml" />
		</p:layoutUnit>
		
		<p:layoutUnit position="west" size="200"
			style="width:200;border-width:1px;">
			<ui:include src="/menuWest.xhtml" />
		</p:layoutUnit>
		
		<p:layoutUnit position="center" style="width:200; border-width:0px;">
		<h:form >
		<p:dataTable value="#{commandeMBean.listCommandes}" var="cmd" selection="#{commandeMBean.selectcom}" selectionMode="single" rowKey="#{cmd.idCommande}">
		
	<p:column headerText="Id Commande"> 
	<h:outputText value="#{cmd.idCommande}" />
	</p:column>
	
	<p:column headerText="Client"> 
	<h:outputText value="#{cmd.client.nomclient}" />
	</p:column>
	
	<p:column headerText="Produit"> 
	<h:outputText value="#{cmd.produit.marqueproduit}" />
	</p:column>
	
	<p:column headerText="Quantité"> 
	<h:outputText value="#{cmd.qtecommande}" />
	</p:column>
	
	<p:column headerText="Date de commande"> 
	<h:outputText value="#{cmd.datecommande}" />
	</p:column>
	
	<p:column headerText="Etat de la commande"> 
	<h:outputText value="#{cmd.etatcommande}" />
	</p:column>
	
	<p:column headerText="Supprimer"> 
	<p:commandButton actionListener="#{commandeMBean.deleteCommande()}" value="Supprimer" />
	</p:column>
	
	<p:column headerText="Modifier"> 
	<p:commandButton value="Editer" oncomplete="PF('dlgUpdate').show()" update="Myformco:dlgUpdate" />
	</p:column>
	
<p:growl ></p:growl>
</p:dataTable>
</h:form>

<h:form id="Myformco">
	<p:growl ></p:growl>
	<p:dialog id="dlgUpdate" widgetVar="dlgUpdate">
	<p:panelGrid columns="2">
	
	<h:outputText value="Id Commande" />
	<h:outputText value="#{commandeMBean.selectcom.idCommande}" />
	
	<h:outputText value="Client" />
	<p:selectOneMenu value="#{commandeMBean.selectcom.client.idclient}" >
	<f:selectItems value="#{commandeMBean.listCommandes}" var="command" itemLabel="#{command.client.nomclient}" itemValue="#{command.idCommande}"/>
	</p:selectOneMenu>
	
	<h:outputText value="Produit" />
	<p:selectOneMenu value="#{commandeMBean.selectcom.produit.idproduit}" >
	<f:selectItems value="#{commandeMBean.listCommandes}" var="command" itemLabel="#{command.produit.marqueproduit}" itemValue="#{command.idCommande}"/>
	</p:selectOneMenu>
	
	<h:outputText value="Quantité" />
	<h:inputText value="#{commandeMBean.selectcom.qtecommande}" />
	
	<h:outputText value="Date de commande" />
	<p:calendar value="#{commandeMBean.selectcom.datecommande}" />
	
	<h:outputText value="Etat de la commande" />
	<h:inputText value="#{commandeMBean.selectcom.etatcommande}" />
	
	<h:commandButton actionListener="#{commandeMBean.updateCommande()}" value="Modifier" />
 
  </p:panelGrid>
  </p:dialog>
  </h:form>

		</p:layoutUnit>
	</p:layout>
</body> 
</html>